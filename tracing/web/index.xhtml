<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Iniciar Sesión</title>
        <h:outputStylesheet name="./css/login.css"/>
    </h:head>
    <h:body id="body">
        <h:form id="frm">
            <p:focus context="panel"/>
            <p:growl id="growl" showDetail="true" life="10000"/>
            <h:panelGrid id="panel" columns="1" cellspacing="25" style="text-align: center">
                <p:graphicImage value="/images/logoVertical.png" style="width: 70%"/>
                <p:inputText placeholder="Usuario" 
                             value="#{beanIndex.usuario}" 
                             styleClass="input"
                             maxlength="20"
                             required="true"
                             requiredMessage="Para acceder ingrese su usuario.">
                </p:inputText>
                
                <p:password placeholder="Clave" 
                            value="#{beanIndex.clave}" 
                            styleClass="input"
                            maxlength="16"
                            required="true"
                            requiredMessage="Para acceder ingrese su clave"/>
                
                <p:commandButton value="Iniciar Sesión" styleClass="boton" actionListener="#{beanIndex.login()}" update=":frm, :form:cambiarClave"/>
            </h:panelGrid>
            
     
        </h:form>
        <h:form id="form">
                   <p:dialog id="cambioClave"
                      widgetVar="cambioClave"
                      modal="true"
                      closeOnEscape="true"
                      showEffect="drop"
                      resizable="false"
                      responsive="true">
                
                       <h:panelGrid columns="2" id="cambiarClave">
                    <p:outputLabel value="Usuario"/>
                    <p:inputText value="#{beanIndex.usuarios.usuario}" disabled="true"/>
                    <p:outputLabel value="Nueva Clave"/>
                    <p:password id="pwNuevo" value="#{beanIndex.usuarios.clave}" match="pwConfirma" validatorMessage="error en coincidencia de claves" />
                    <p:outputLabel value="Confirmar clave"/>
                    <p:password id="pwConfirma" value="#{beanIndex.usuarios.clave}"/>
                    <p:commandButton value="Grabar" icon="ui-icon-disk" actionListener="#{beanIndex.cambioClave()}" update=":frm:growl"/>
                </h:panelGrid>
                
            </p:dialog>
        </h:form>
    </h:body>
</html>

